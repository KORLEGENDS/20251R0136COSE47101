
## ğŸ“Œ 2. ë°ì´í„° ì „ì²˜ë¦¬ ë¡œë“œë§µ (ë‹¨ê³„ë³„)

### ë‹¨ê³„ A. ê±°ë˜Â·ê°€ê²© ë°ì´í„° ì „ì²˜ë¦¬

#### A-1. ëŒ€ìƒ íŒŒì¼

* `(ì›”) ë§¤ë§¤ê°€ê²©ì§€ìˆ˜_ì•„íŒŒíŠ¸.csv`
* `(ì›”) ì „ì„¸ê°€ê²©ì§€ìˆ˜_ì•„íŒŒíŠ¸.csv`
* `(ì›”) í–‰ì •êµ¬ì—­ë³„ ì•„íŒŒíŠ¸ê±°ë˜í˜„í™©_ì „ì²´.csv`
* `(ì›”) í–‰ì •êµ¬ì—­ë³„ ì•„íŒŒíŠ¸ë§¤ë§¤ê±°ë˜í˜„í™©_ì „ì²´.csv`
* `(ì£¼) ë§¤ë§¤ê°€ê²©ì§€ìˆ˜.csv` (ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©)

> **ëª©í‘œ**:
>
> 1. "ì‹œÂ·êµ°Â·êµ¬ ì½”ë“œ + ì—°ë„-ì›”"ì„ í‚¤ë¡œ í•˜ëŠ” íŒ¨ë„ ë°ì´í„°í”„ë ˆì„(DataFrame)ì˜ ë¼ˆëŒ€ë¥¼ ë§Œë“ ë‹¤.
> 2. ì›”ë³„ ë§¤ë§¤ê°€ê²© ì§€ìˆ˜(price\_index), ì „ì„¸ê°€ê²© ì§€ìˆ˜(jeonse\_index), ê±°ë˜ëŸ‰(transaction\_count) ë“±ì„ ì´ í”„ë ˆì„ì— ì¹¼ëŸ¼ìœ¼ë¡œ ì…íŒë‹¤.

##### A-1-â‘ . íŒŒì¼ ë¡œë”© ë° ì¸ì½”ë”© í™•ì¸

1. **ì¸ì½”ë”©**

   * `pandas.read_csv(â€¦, encoding='cp949' ë˜ëŠ” 'euc-kr')` vs `encoding='utf-8'` ì¤‘ ê¹¨ì§€ì§€ ì•ŠëŠ” ìª½ìœ¼ë¡œ ë¡œë“œ
   * ì˜ˆ)

     ```python
     df_price = pd.read_csv('ë§¤ë§¤ê°€ê²©ì§€ìˆ˜_ì•„íŒŒíŠ¸.csv', encoding='cp949')
     df_jeonse = pd.read_csv('ì „ì„¸ê°€ê²©ì§€ìˆ˜_ì•„íŒŒíŠ¸.csv', encoding='cp949')
     df_trans_all = pd.read_csv('í–‰ì •êµ¬ì—­ë³„ ì•„íŒŒíŠ¸ê±°ë˜í˜„í™©_ì „ì²´.csv', encoding='utf-8')
     ```
   * **ë¡œë”© í›„ ë°”ë¡œ** `df.head()`/`df.info()`ë¡œ í•œê¸€Â·ìˆ«ì ì»¬ëŸ¼ì´ ì •ìƒì ìœ¼ë¡œ ë³´ì´ëŠ”ì§€ í™•ì¸

2. **íŒŒì¼ë³„ ì»¬ëŸ¼ëª… íŒŒì•…**

   * ë³´í†µ `ì§€ì—­ì½”ë“œ(ì‹œÂ·êµ°Â·êµ¬)`, `ì§€ì—­ëª…(ì‹œÂ·êµ°Â·êµ¬)`, `ì‹œì (YYYY.MM)`, `ì§€ìˆ˜ê°’` í˜•íƒœ
   * ì˜ˆ) ë§¤ë§¤ê°€ê²©ì§€ìˆ˜ íŒŒì¼:

     ```
     ['ì‹œë„ëª…', 'ì‹œêµ°êµ¬ëª…', 'ì§€ì—­ì½”ë“œ', 'ê¸°ì¤€ë…„ì›”', 'ë§¤ë§¤ê°€ê²©ì§€ìˆ˜']  
     ```
   * ì „ì„¸ê°€ê²©ì§€ìˆ˜ íŒŒì¼:

     ```
     ['ì‹œë„ëª…', 'ì‹œêµ°êµ¬ëª…', 'ì§€ì—­ì½”ë“œ', 'ê¸°ì¤€ë…„ì›”', 'ì „ì„¸ê°€ê²©ì§€ìˆ˜']  
     ```
   * ê±°ë˜í˜„í™© íŒŒì¼:

     ```
     ['ì‹œë„ì½”ë“œ', 'ì‹œêµ°êµ¬ì½”ë“œ', 'ì‹œë„ëª…', 'ì‹œêµ°êµ¬ëª…', 'ì‹œì ', 'ê±°ë˜ëŸ‰', 'í‰ê· ë§¤ë§¤ê°€', â€¦]  
     ```

##### A-1-â‘¡. ì»¬ëŸ¼ëª… í‘œì¤€í™” ë° ë‚ ì§œ í˜•ì‹ ë³€í™˜

1. **ì»¬ëŸ¼ëª… í†µì¼**

   * ëª¨ë“  DFì—ì„œ "ì§€ì—­ì½”ë“œ" ì»¬ëŸ¼ëª…ì€ `region_code`, "ì‹œì " ì»¬ëŸ¼ì€ `year_month`ë¡œ í†µì¼
   * ì˜ˆ)

     ```python
     df_price = df_price.rename(columns={'ì§€ì—­ì½”ë“œ':'region_code', 'ê¸°ì¤€ë…„ì›”':'year_month', 'ë§¤ë§¤ê°€ê²©ì§€ìˆ˜':'price_index'})
     df_jeonse = df_jeonse.rename(columns={'ì§€ì—­ì½”ë“œ':'region_code', 'ê¸°ì¤€ë…„ì›”':'year_month', 'ì „ì„¸ê°€ê²©ì§€ìˆ˜':'jeonse_index'})
     df_trans_all = df_trans_all.rename(columns={'ì‹œêµ°êµ¬ì½”ë“œ':'region_code', 'ì‹œì ':'year_month', 'ê±°ë˜ëŸ‰':'transaction_count', 'í‰ê· ë§¤ë§¤ê°€':'avg_transaction_price'})
     ```
2. **ë‚ ì§œ(datetime) ë³€í™˜**

   * `year_month`ì— "YYYY.MM" í˜•íƒœê°€ ë“¤ì–´ìˆëŠ” ê²½ìš°:

     ```python
     df_price['year_month'] = pd.to_datetime(df_price['year_month'], format='%Y.%m')
     df_jeonse['year_month'] = pd.to_datetime(df_jeonse['year_month'], format='%Y.%m')
     df_trans_all['year_month'] = pd.to_datetime(df_trans_all['year_month'], format='%Y.%m')
     ```
   * ì£¼ ë‹¨ìœ„ ì§€ìˆ˜ê°€ ìˆì„ ê²½ìš°, ì˜ˆ) "YYYY-WW" í˜•ì‹ â†’ ì›”ë³„ ë¶„ì„ ëª©í‘œì´ë¯€ë¡œ, "í•´ë‹¹ ì£¼ì˜ ì²« ë²ˆì§¸ ë‚ ì§œ" ë˜ëŠ” "í•´ë‹¹ ì£¼ê°€ ì†í•œ ì—°-ì›”"ë¡œ í™˜ì‚°

     ```python
     df_weekly['year_month'] = df_weekly['basedate'].dt.to_period('M').dt.to_timestamp()
     ```

##### A-1-â‘¢. ê²°ì¸¡ì¹˜ ë° ì´ìƒì¹˜ ì ê²€

1. **ê²°ì¸¡ì¹˜ ë¹„ìœ¨ í™•ì¸**

   * ê° DFë§ˆë‹¤

     ```python
     df_price.isna().sum() / len(df_price)
     df_jeonse.isna().sum() / len(df_jeonse)
     df_trans_all.isna().sum() / len(df_trans_all)
     ```
   * 'ë§¤ë§¤ê°€ê²©ì§€ìˆ˜'/ê±°ë˜ëŸ‰'ì— ê²°ì¸¡ì´ ìˆìœ¼ë©´ ë°”ë¡œ `drop`í•˜ê¸°ë³´ë‹¤ëŠ”

     * **ì‹œÂ·êµ°Â·êµ¬ë³„ ì‹œê³„ì—´ ê²°ì¸¡êµ¬ê°„**ì´ ì—°ì†ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ â†’ "ì •ìƒì ìœ¼ë¡œ ì‹œê³„ì—´ êµ¬ì¶• ê°€ëŠ¥í•œì§€" íŒë‹¨
     * ë§Œì•½ í•œ ë‘ ê°œì›” ê²°ì¸¡ì´ë©´, ì¸ê·¼ ì›” ê°’ìœ¼ë¡œ ë³´ê°„(linear/interpolate) ê°€ëŠ¥
2. **ì´ìƒì¹˜ íƒì§€**

   * ë…¼ë¦¬ì  ì´ìƒì¹˜ ì˜ˆì‹œ

     * ë§¤ë§¤ê°€ê²©ì§€ìˆ˜ê°€ ìŒìˆ˜ ë˜ëŠ” 0ìœ¼ë¡œ ê¸°ë¡ëœ ê²½ìš°
     * ê±°ë˜ëŸ‰ì´ ê°‘ìê¸° í‰ì†Œ ëŒ€ë¹„ 10ë°° ì´ìƒ íŠ€ëŠ” ê²½ìš°
   * ê°„ë‹¨í•œ ì²˜ë¦¬

     ```python
     # ìŒìˆ˜/0ì¸ ë§¤ë§¤ê°€ê²©ì§€ìˆ˜ ì‚­ì œ
     df_price = df_price[df_price['price_index'] > 0]
     # ê±°ë˜ëŸ‰ ì´ìƒì¹˜: ìƒìœ„ 0.1% ê°’ ë¡œê·¸ í™•ì¸, í•„ìš”í•˜ë©´ clip í˜¹ì€ nan ì²˜ë¦¬
     thresh = df_trans_all['transaction_count'].quantile(0.999)
     df_trans_all.loc[df_trans_all['transaction_count'] > thresh, 'transaction_count'] = np.nan
     ```
   * ê²°ì¸¡ ì²˜ë¦¬ ë¡œê·¸ë¥¼ ë³„ë„ íŒŒì¼(ë˜ëŠ” CSV)ë¡œ ì €ì¥í•˜ì—¬, "ì¶”í›„ ë³´ê³ ì„œì— ê²°ì¸¡Â·ì´ìƒì¹˜ ì²˜ë¦¬ ë°©ë²•ë¡ " ë¶€ë¶„ì— ì¸ìš©

##### A-1-â‘£. ì§€ì—­ ì½”ë“œ ì •í•©ì„± ë° ìµœì¢… íŒ¨ë„ ë¼ˆëŒ€ ìƒì„±

1. **region\_code í™•ì¸**

   * `df_price['region_code'].nunique()`ì™€ `df_trans_all['region_code'].nunique()` ë¹„êµ
   * ëª¨ë“  ê±°ë˜ ë°ì´í„°ì—ëŠ” ìµœì†Œí•œ ë§¤ë§¤/ì „ì„¸ì§€ìˆ˜ì— ì¡´ì¬í•˜ëŠ” region\_codeê°€ ìˆì–´ì•¼ í•¨ â†’ ë¹ ì§„ ê²½ìš°,

     * ì‹œÂ·êµ°Â·êµ¬ ì´ë¦„ ê¸°ì¤€ìœ¼ë¡œ ì¡°ì¸í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸(`merge(on=['ì‹œë„ëª…','ì‹œêµ°êµ¬ëª…'])` í›„ ì½”ë“œ ë¶€ì—¬)
2. **"ì‹œÂ·êµ°Â·êµ¬ Ã— ì›”" ì¸ë±ìŠ¤ ìƒì„±**

   * í”„ë¡œì íŠ¸ ë¶„ì„ ê¸°ê°„(ì˜ˆ: 2015ë…„ 1ì›” \~ 2024ë…„ 4ì›”) ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  ì‹œÂ·êµ°Â·êµ¬ê°€ ì›” ë‹¨ìœ„ íŒ¨ë„ì„ ê°€ì§€ê²Œë” ë¹ˆ ë¼ˆëŒ€ ìƒì„±
   * ì˜ˆì‹œ:

     ```python
     all_regions = sorted(df_price['region_code'].unique())
     all_months = pd.date_range(start='2015-01-01', end='2024-04-01', freq='MS')
     panel_index = pd.MultiIndex.from_product([all_regions, all_months], names=['region_code','year_month'])
     df_panel = pd.DataFrame(index=panel_index).reset_index()
     ```
3. **ê° DFë¥¼ ì´ ë¼ˆëŒ€ì— `merge`**

   * ìˆœì„œëŒ€ë¡œ(ë§¤ë§¤ì§€ìˆ˜ â†’ ì „ì„¸ì§€ìˆ˜ â†’ ê±°ë˜ëŸ‰ â†’ í‰ê· ë§¤ë§¤ê°€)

     ```python
     df_panel = df_panel.merge(df_price[['region_code','year_month','price_index']], on=['region_code','year_month'], how='left')
     df_panel = df_panel.merge(df_jeonse[['region_code','year_month','jeonse_index']], on=['region_code','year_month'], how='left')
     df_panel = df_panel.merge(df_trans_all[['region_code','year_month','transaction_count','avg_transaction_price']], on=['region_code','year_month'], how='left')
     ```
   * ë¨¸ì§€ í›„ì—ë„ ê²°ì¸¡ì¹˜ê°€ ìƒê¸¸ ìˆ˜ ìˆìŒ(ì˜ˆ: ì‹ ê·œ ì‹ ë„ì‹œ ì¶œí˜„ìœ¼ë¡œ ë°ì´í„°ê°€ ì—†ëŠ” ì´ˆê¸° ì›” ë“±) â†’

     * ê²°ì¸¡ ì‹œ ë¡œìš°ë¥¼ ê·¸ëŒ€ë¡œ ë†”ë‘ê±°ë‚˜, í•„ìš” ì‹œ "0ìœ¼ë¡œ ì±„ìš°ê¸°" í˜¹ì€ "ì¸ê·¼ ìœ ì‚¬ ì§€ì—­(Aê·¸ë£¹)ì˜ ì¤‘ì•™ê°’ìœ¼ë¡œ ëŒ€ì²´"í•˜ëŠ” ë°©ì•ˆ ê²€í† 

##### A-1-â‘¤. ê²°ê³¼ í™•ì¸ ë° ì²« ë²ˆì§¸ ì»¤ë°‹

* ìµœì¢… `df_panel`ì—

  ```
  region_code | year_month | price_index | jeonse_index | transaction_count | avg_transaction_price
  ```

  ë“±ì´ ì •ìƒì ìœ¼ë¡œ ê²°í•©ë˜ì—ˆëŠ”ì§€ í™•ì¸
* ì£¼ìš” í†µê³„:

  ```python
  df_panel[['price_index','jeonse_index','transaction_count','avg_transaction_price']].describe()
  ```
* **ì»¤ë°‹ ë©”ì‹œì§€ ì˜ˆì‹œ**:

  ```
  [STEP-A] ê±°ë˜Â·ê°€ê²© ë°ì´í„° ë¡œë”© ë° ì‹œÂ·êµ°Â·êµ¬Ã—ì›” íŒ¨ë„ ë¼ˆëŒ€ ìƒì„± ì™„ë£Œ
  ```

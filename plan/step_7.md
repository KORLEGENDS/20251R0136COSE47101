
## 📌 3. 전처리 후 남은 최종점검

1. **통합 패널 DataFrame 최종 확인**

   * 컬럼 리스트 예시:

     ```
     ['region_code', 'year_month',
      'price_index', 'jeonse_index', 'transaction_count', 'avg_transaction_price',
      'unsold_count', 'unsold_rate', 'future_supply', '건축공허율(%)', 'start_construction',
      'is_speculation_area', 'is_overheated_area', 'is_adjustment_area',
      'LTV_ratio', 'DTI_ratio', 'base_rate', 'loan_rate',
      'capgain_tax_rate', '종부세율', 'competition_rate', 'region_avg_sub_price',
      'employment_rate', 'GRDP'
     ]
     ```

2. **결측치 통계 및 처리 전략 결정**

   * 각 컬럼별 결측값 비율(`df_panel.isna().sum() / len(df_panel)`) 확인
   * **결측이 현저히 많은 컬럼**(예: 신도시 초기 몇 년간 데이터 부족)을

     * 모델링 시 "결측 더미 변수"로 남길지
     * 아예 해당 구간을 분석 범위에서 제외할지 논의
   * **이상치 재점검**

     * 월별 `price_index`와 `avg_transaction_price` 간 상관이 너무 낮은 경우→ 추가 점검
     * "매월 가격대비 거래량 갑작스러운 이상 구간"은 이벤트(예: 코로나 락다운)인지, 단순 오류인지 확인

3. **최종 전처리 커밋**

   * **커밋 메시지 예시**:

     ```
     [STEP-F] 통합 패널 데이터 최종 점검 완료 (결측치/이상치 리포트 포함)
     ```

---

## 📌 4. 정리 및 향후 작업 연계

* **이제 이 `df_panel`을 바탕으로**

  1. **EDA/시각화** → 패턴 확인
  2. **패널 회귀/이벤트 연구** → 정책 효과 분석
  3. **머신러닝 모델 학습** → 예측 성능 검증
* 위 과정은 "전처리가 끝난 데이터프레임"을 입력으로 받으면 되므로,

  * 중간중간 "전처리 스크립트 함수화" (예: `load_price_data()`, `clean_unsold_data()`, `make_event_dummies()`)
  * Docker/Conda 환경을 통한 재현 가능성 확보
* **커밋 가이드라인** (최종 전처리 완료 시점까지)

  * 적어도 **6\~7회** 커밋:

    1. 거래·가격 패널 뼈대 생성
    2. 공급 데이터 결합
    3. 규제∙금융 데이터 결합
    4. 청약 데이터 결합
    5. 거시·고용 데이터 결합
    6. 최종 결측/이상치 처리 및 패널 점검
  * 이후 **EDA/모델링 파트**에 들어가며 추가 커밋(총 최소 10회 이상)

---

## 요약

1. **거래·가격 데이터**를 우선 로드하여 "시·군·구 × 월" 패널 뼈대를 만들고,
2. **공급 데이터(미분양·입주예정·착공·건축공허율)**를 차례로 합쳐서 "시·군·구 × 월" 패널에 넣고,
3. **규제∙세제∙금융 데이터**(이벤트 더미, 정책 시점별 값)를 월별로 확장하여 패널에 결합,
4. **청약 경쟁률·평균 분양가**를 연도→월 단위로 복사하여 패널에 합치고,
5. **거시·지역 통제 변수**(고용률, GRDP, 인구)를 월별 패널에 반영,
6. 마지막으로 **결측치/이상치 점검**을 완료하면,

   * 비로소 "모든 독립변수(Features) + 종속변수(price\_index)"가 준비된 **최종 패널 데이터**가 확보됨.